{% extends 'base.html' %}

{% block pagebody %}

<div class="container mb-5">
  <div>
    <h1 class="mb-2 text-center">Prenota un Turno</h1>
    <form action="/shifts/load_date" method="POST">
      <div class="row w-75 mx-auto mt-4">
        <div class="col text-center">
          <strong>Date</strong> 
          <input name="date" type="date", value= {{ date_string }} >
        </div>
        <div class="col text-center">
          <strong>Room</strong>
          <select id="room" name="room">
            <option value="All">All</option>
            {% for i in rooms %}
            <option value="{{ i.name }}"> {{ i.name }} </option>
            {% endfor %}
          </select>
        </div>
        <div class="col text-center">
          <input type="submit", value="Cerca" class="btn btn-info text-light" >
        </div>
      </div>
    </form>
  </div>
  

  <div class=" w-75 mx-auto mt-4">
    <table class="table table-hover">
      <tr>
        <th>Date</th>
        <th>Start</th>
        <th>End</th>
        <th>Room</th>
        <th>Booking</th>
        <th>Prenote</th>
      </tr>

      {% for s in shifts %}
      <tr>
        <td>{{s.date}}</td>
        <td>{{s.h_start}}</td>
        <td>{{s.h_end}}</td>
        <td>{{s.room.name}}</td>
        <td>{{s.room.max_capacity - s.prenotations|length}}/{{s.room.max_capacity}}</td>
        <td>
          <form action= "{{ url_for('prenotation', shift = s.id) }}">
            <input type="submit", value="Iscriviti" class="btn btn-info btn-sm text-light">
          </form>
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
</div>

{% endblock %}
