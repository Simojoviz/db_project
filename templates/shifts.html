{% extends 'base.html' %}

{% block pagebody %}


<form action="/shifts/load_date" method="POST">
  Insert date:
  <input name="date" type="date", value= {{ date_string }} >
  <br>
  Insert room:
  <select id="room" name="room">
      <option value="All">All</option>
      <option value="Main Room">Main Room</option>
      <option value="Weight Room">Weight Room</option>
      <option value="Fitness Room">Fitness Room</option>
      <option value="Swimming Pool">Swimming Pool</option>
      <option value="Boxing Room">Boxing Room</option>
  </select>
  <input type="submit">
</form>
      {% for s in shifts %}
      <tr>
        <td>{{s.date}}</td>
        <td>{{s.h_start}}</td>
        <td>{{s.h_end}}</td>
        <td>{{s.room.name}}</td>
        <td>{{s.room.max_capacity - s.prenotations|length}}/{{s.room.max_capacity}}</td>
        <td>
          {% if user is not none and s in user.prenotations_shifts %}
            <input type="submit", value="Subscribed" class="btn btn-success btn-sm">
          {% elif s.room.max_capacity - s.prenotations|length > 0 %}
            <form action= "{{ url_for('prenotation', shift = s.id) }}">
              <input type="submit", value="Book" class="btn btn-success btn-sm">
            </form>
          {% else %}
            <input type="submit", value="Full" class="btn btn-success btn-sm">
          {% endif %}
        </td>
      </tr>
      {% endfor %}
    </table>
  </div>
</div>
</div>

<form action="/private">
    <input type="submit", value="Back">
</form>
  
  
{% endblock %}
