{% extends 'base.html' %}

{% block pagebody %}

<div class="container">
  <h2 class="mb-2">Prenota un Turno</h2>
  <form action="/shifts/load_date" method="POST">
    Insert date:
    <input name="date" type="date", value= {{ date_string }} >
    <br>
    Insert room:
    <select id="room" name="room">
      <option value="All">All</option>
      {% for i in rooms %}
      <option value="{{ i.name }}"> {{ i.name }} </option>
      {% endfor %}
    </select>
    <input type="submit", value="Cerca">
</form>
  
<table>
      <tr>
        <th>Date</th>
        <th>Start</th>
        <th>End</th>
        <th>Room</th>
        <th>Booking</th>
        <th>Prenote</th>
      </tr>

      {% for s in shifts %}
      <tr>
        <td>{{s.date}}</td>
        <td>{{s.h_start}}</td>
        <td>{{s.h_end}}</td>
        <td>{{s.room.name}}</td>
        <td>{{s.room.max_capacity - s.prenotations|length}}/{{s.room.max_capacity}}</td>
        <td>
          <form action= "{{ url_for('prenotation', shift = s.id) }}">
            <input type="submit", value="Iscriviti">
          </form>
        </td>
      </tr>
      {% endfor %}

    </table>

  </div>
 
    
<!-- <div class="container">
    <div class="container-fluid ">
      {% for r in rooms %}
        {% for s in shifts %}
          {% if s.room_id == r.id %}
            <p class="m-2">
              {{s}}
              <form action= "{{ url_for('prenotation', shift = s.id) }}">
                <input type="submit", value="Iscriviti">
              </form>
            </p>
          {% endif %}
        {% endfor %}
      {% endfor %}
    </div>
  </div> -->
  
  <form action="/private">
      <input type="submit", value="Back">
  </form>
</div>

{% endblock %}
